<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data Models and Data Model Definitions &mdash; PODIO  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=7f41d439"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Examples for Supported Interface" href="examples.html" />
    <link rel="prev" title="Design and Implementation Details" href="design.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            PODIO
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="doc.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="doc.html#quick-start">Quick-start</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html">Design and Implementation Details</a><ul>
<li class="toctree-l2"><a class="reference internal" href="design.html#layout-of-objects">Layout of Objects</a><ul>
<li class="toctree-l3"><a class="reference internal" href="design.html#the-user-layer">The User Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="design.html#the-internal-data-layer">The Internal Data Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="design.html#the-pod-layer">The POD Layer</a></li>
<li class="toctree-l3"><a class="reference internal" href="design.html#the-collections">The Collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="design.html#vectorization-support-notebook-pattern">Vectorization support / notebook pattern</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="design.html#handling-mutability">Handling mutability</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Data Models and Data Model Definitions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#basic-concepts-and-supported-features">Basic Concepts and Supported Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#definition-of-custom-components">Definition of custom components</a></li>
<li class="toctree-l2"><a class="reference internal" href="#definition-of-custom-data-classes">Definition of custom data classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#defining-members">Defining members</a></li>
<li class="toctree-l3"><a class="reference internal" href="#definition-of-references-between-objects">Definition of references between objects:</a></li>
<li class="toctree-l3"><a class="reference internal" href="#explicit-definition-of-methods">Explicit definition of methods</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#global-options">Global options</a></li>
<li class="toctree-l2"><a class="reference internal" href="#extending-a-datamodel-using-types-from-an-upstream-datamodel">Extending a datamodel / using types from an upstream datamodel</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#potential-pitfalls">Potential pitfalls</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples for Supported Interface</a><ul>
<li class="toctree-l2"><a class="reference internal" href="examples.html#object-ownership">Object Ownership</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#object-creation-and-storage">Object Creation and Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#object-references">Object References</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#looping-through-collections">Looping through Collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#support-for-notebook-pattern">Support for Notebook-Pattern</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#podio-frame-container"><code class="docutils literal notranslate"><span class="pre">podio::Frame</span></code> container</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#object-retrieval">Object Retrieval</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples.html#user-defined-meta-data">User defined Meta Data</a><ul>
<li class="toctree-l3"><a class="reference internal" href="examples.html#python-interface">Python Interface</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="frame.html">The <code class="docutils literal notranslate"><span class="pre">Frame</span></code> concept</a><ul>
<li class="toctree-l2"><a class="reference internal" href="frame.html#basic-functionality-of-a-frame">Basic functionality of a <code class="docutils literal notranslate"><span class="pre">Frame</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="frame.html#usage-examples-for-collection-data">Usage examples for collection data</a><ul>
<li class="toctree-l4"><a class="reference internal" href="frame.html#putting-collection-data-into-the-frame">Putting collection data into the <code class="docutils literal notranslate"><span class="pre">Frame</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="frame.html#getting-collection-references-from-the-frame">Getting collection (references) from the <code class="docutils literal notranslate"><span class="pre">Frame</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="frame.html#usage-for-parameters">Usage for Parameters</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="frame.html#i-o-basics-and-philosophy">I/O basics and philosophy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="frame.html#writing-a-frame">Writing a <code class="docutils literal notranslate"><span class="pre">Frame</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="frame.html#reading-a-frame">Reading a <code class="docutils literal notranslate"><span class="pre">Frame</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="frame.html#schema-evolution">Schema evolution</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="frame.html#frame-implementation-and-design">Frame implementation and design</a></li>
<li class="toctree-l1"><a class="reference internal" href="userdata.html">Writing extra data outside an EDM</a><ul>
<li class="toctree-l2"><a class="reference internal" href="userdata.html#example-usage">Example usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="userdata.html#some-limitations">Some limitations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="userdata.html#no-relations-to-other-collections">No relations to other collections</a></li>
<li class="toctree-l3"><a class="reference internal" href="userdata.html#limited-supported-types">Limited supported types</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="advanced_topics.html">Advanced Topics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="advanced_topics.html#writing-extra-data-outside-the-edm">Writing extra data outside the EDM</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced_topics.html#changing-creating-new-templates">Changing / creating new templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced_topics.html#persistency">Persistency</a><ul>
<li class="toctree-l3"><a class="reference internal" href="advanced_topics.html#writing-back-end">Writing Back-End</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_topics.html#reading-back-end">Reading Back-End</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_topics.html#dumping-json">Dumping JSON</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="advanced_topics.html#thread-safety">Thread-safety</a><ul>
<li class="toctree-l3"><a class="reference internal" href="advanced_topics.html#changing-user-data">Changing user data</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_topics.html#serialization">Serialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_topics.html#not-thread-safe-components">Not-thread-safe components</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="advanced_topics.html#running-pre-commit">Running pre-commit</a></li>
<li class="toctree-l2"><a class="reference internal" href="advanced_topics.html#retrieving-the-edm-definition-from-a-data-file">Retrieving the EDM definition from a data file</a><ul>
<li class="toctree-l3"><a class="reference internal" href="advanced_topics.html#accessing-the-edm-definition-programmatically">Accessing the EDM definition programmatically</a></li>
<li class="toctree-l3"><a class="reference internal" href="advanced_topics.html#technical-details-on-edm-definition-embedding">Technical details on EDM definition embedding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="advanced_topics.html#the-datamodelregistry">The <code class="docutils literal notranslate"><span class="pre">DatamodelRegistry</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="advanced_topics.html#i-o-helpers-for-edm-definition-storing">I/O helpers for EDM definition storing</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="templates.html">Changing / creating new templates</a><ul>
<li class="toctree-l2"><a class="reference internal" href="templates.html#preprocessing-of-yaml-file">Preprocessing of yaml file</a></li>
<li class="toctree-l2"><a class="reference internal" href="templates.html#existing-templates">Existing templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="templates.html#adding-a-new-template">Adding a new template</a></li>
<li class="toctree-l2"><a class="reference internal" href="templates.html#available-information-in-the-templates">Available information in the templates</a><ul>
<li class="toctree-l3"><a class="reference internal" href="templates.html#general-information">General information</a></li>
<li class="toctree-l3"><a class="reference internal" href="templates.html#components">Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="templates.html#datatypes">Datatypes</a></li>
<li class="toctree-l3"><a class="reference internal" href="templates.html#membervariable"><code class="docutils literal notranslate"><span class="pre">MemberVariable</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="templates.html#datatype"><code class="docutils literal notranslate"><span class="pre">DataType</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="templates.html#julia-code-generation">Julia code generation</a></li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PODIO</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Data Models and Data Model Definitions</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="data-models-and-data-model-definitions">
<h1>Data Models and Data Model Definitions<a class="headerlink" href="#data-models-and-data-model-definitions" title="Link to this heading"></a></h1>
<p>To describe a data model PODIO provides a data model definition syntax.
This is to ease the creation of optimised data formats, which may take advantage of a so-called <code class="docutils literal notranslate"><span class="pre">struct-of-array</span></code> data layout.
From the user-provided data model description PODIO creates all the files necessary to use this data model.</p>
<section id="basic-concepts-and-supported-features">
<h2>Basic Concepts and Supported Features<a class="headerlink" href="#basic-concepts-and-supported-features" title="Link to this heading"></a></h2>
<p>PODIO encourages the usage of composition, rather than inheritance.
One of the reasons for doing so is the focus on efficiency friendly <code class="docutils literal notranslate"><span class="pre">plain-old-data</span></code>.
For this reason, PODIO does not support inheritance within the defined data model.
Instead, users can combine multiple <code class="docutils literal notranslate"><span class="pre">components</span></code> to build a to be used <code class="docutils literal notranslate"><span class="pre">datatype</span></code>.</p>
<p>To allow the datatypes to be real PODs, the data stored within the data model are constrained to be
POD-compatible data. Those are</p>
<ol class="arabic simple">
<li><p>basic types like int, double, etc as well as a limited set of fixed width
integers from <code class="docutils literal notranslate"><span class="pre">&lt;cstdint&gt;</span></code> (the <code class="docutils literal notranslate"><span class="pre">_leastN</span></code> or <code class="docutils literal notranslate"><span class="pre">_fastN</span></code> types as well as all
<code class="docutils literal notranslate"><span class="pre">8</span></code> bit types are not allowed).</p></li>
<li><p>components built up from basic types or other components</p></li>
<li><p>Fixed sized arrays of those types</p></li>
</ol>
<p>In addition, PODIO supports the storage of one-to-one and one-to-many relations between objects.
In the following the syntax for defining a given data model is explained.
A later section contains more details about the code being created from this.</p>
</section>
<section id="definition-of-custom-components">
<h2>Definition of custom components<a class="headerlink" href="#definition-of-custom-components" title="Link to this heading"></a></h2>
<p>A component is just a flat struct containing data. it can be defined via:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">components</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># My example component</span>
<span class="w">      </span><span class="nt">MyComponent</span><span class="p">:</span>
<span class="w">        </span><span class="nt">Members</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float x</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float y</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">float z</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">AnotherComponent a</span>
</pre></div>
</div>
</section>
<section id="definition-of-custom-data-classes">
<h2>Definition of custom data classes<a class="headerlink" href="#definition-of-custom-data-classes" title="Link to this heading"></a></h2>
<p>Here an excerpt from “datamodel.yaml” for a simple class, just containing one member of the type <code class="docutils literal notranslate"><span class="pre">int</span></code>.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">datatypes </span><span class="p">:</span>
<span class="w">      </span><span class="nt">EventInfo </span><span class="p">:</span>
<span class="w">        </span><span class="nt">Description </span><span class="p">:</span><span class="w"> </span><span class="s">&quot;My</span><span class="nv"> </span><span class="s">first</span><span class="nv"> </span><span class="s">data</span><span class="nv"> </span><span class="s">type&quot;</span>
<span class="w">        </span><span class="nt">Author </span><span class="p">:</span><span class="w"> </span><span class="s">&quot;It&#39;s</span><span class="nv"> </span><span class="s">me&quot;</span>
<span class="w">        </span><span class="nt">Members </span><span class="p">:</span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int Number // event number</span>
</pre></div>
</div>
<p>Using this definition, three classes will be created: <code class="docutils literal notranslate"><span class="pre">EventInfo</span></code>, <code class="docutils literal notranslate"><span class="pre">EventInfoData</span></code> and <code class="docutils literal notranslate"><span class="pre">EventInfoCollection</span></code>. These have the following signature:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="k">class</span><span class="w"> </span><span class="nc">EventInfoData</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">public</span><span class="o">:</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">Number</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">class</span><span class="w"> </span><span class="nc">EventInfo</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">public</span><span class="o">:</span>
<span class="w">      </span><span class="p">...</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">Number</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">Number</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
<span class="w">      </span><span class="p">...</span>
<span class="w">    </span><span class="p">}</span>
</pre></div>
</div>
<section id="defining-members">
<h3>Defining members<a class="headerlink" href="#defining-members" title="Link to this heading"></a></h3>
<p>The definition of a member is done in the <code class="docutils literal notranslate"><span class="pre">Members</span></code> section in the form:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">Members</span><span class="p">:</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">&lt;type&gt; &lt;name&gt; // &lt;comment&gt;</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">type</span></code> can be any builtin-type or a <code class="docutils literal notranslate"><span class="pre">component</span></code>.</p>
<p>It is also possible to specify default values for members via</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">Members</span><span class="p">:</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">&lt;type&gt; &lt;name&gt;{&lt;default-value&gt;} // &lt;comment&gt;</span>
</pre></div>
</div>
<p>Note that in this case it is extremely expensive to check whether the provided <code class="docutils literal notranslate"><span class="pre">default-value</span></code> results in valid c++.
Hence, there is only a very basic syntax check, but no actual type check, and wrong default values will be caught only when trying to compile the datamodel.</p>
<p>For describing physics quantities it is important to know their units. Thus it is possible to add the units to the member definition:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">Members</span><span class="p">:</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">&lt;type&gt; &lt;name&gt;{&lt;default-value&gt;} [&lt;unit&gt;] // &lt;comment&gt;</span>
</pre></div>
</div>
</section>
<section id="definition-of-references-between-objects">
<h3>Definition of references between objects:<a class="headerlink" href="#definition-of-references-between-objects" title="Link to this heading"></a></h3>
<p>There can be one-to-one-relations and one-to-many relations being stored in a particular class. This happens either in the <code class="docutils literal notranslate"><span class="pre">OneToOneRelations</span></code> or <code class="docutils literal notranslate"><span class="pre">OneToManyRelations</span></code> section of the data definition. The definition has again the form:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">OneToOneRelations</span><span class="p">:</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">&lt;type&gt; &lt;name&gt; // &lt;comment&gt;</span>
<span class="w">    </span><span class="nt">OneToManyRelations</span><span class="p">:</span>
<span class="w">      </span><span class="l l-Scalar l-Scalar-Plain">&lt;type&gt; &lt;name&gt; // &lt;comment&gt;</span>
</pre></div>
</div>
</section>
<section id="explicit-definition-of-methods">
<h3>Explicit definition of methods<a class="headerlink" href="#explicit-definition-of-methods" title="Link to this heading"></a></h3>
<p>In a few cases, it makes sense to add some more functionality to the created classes. Thus this library provides two ways of defining additional methods and code. Either by defining them inline or in external files. Extra code has to be provided separately for immutable and mutable additions.
Note that the immutable (<code class="docutils literal notranslate"><span class="pre">ExtraCode</span></code>) will also be placed into the mutable classes, so that there is no need for duplicating the code.
Only if some additions should only be available for the mutable classes it is necessary to fill the <code class="docutils literal notranslate"><span class="pre">MutableExtraCode</span></code> section.
The <code class="docutils literal notranslate"><span class="pre">includes</span></code> will be add to the header files of the generated classes.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">ExtraCode</span><span class="p">:</span>
<span class="w">      </span><span class="nt">includes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;newline separated list of strings (optional)&gt;</span>
<span class="w">      </span><span class="nt">declaration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;string&gt;</span>
<span class="w">      </span><span class="nt">implementation </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;string&gt;</span>
<span class="w">      </span><span class="nt">declarationFile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;string&gt; (to be implemented!)</span>
<span class="w">      </span><span class="nt">implementationFile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;string&gt; (to be implemented!)</span>
<span class="w">    </span><span class="nt">MutableExtraCode</span><span class="p">:</span>
<span class="w">      </span><span class="nt">includes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;newline separated list of strings (optional)&gt;</span>
<span class="w">      </span><span class="nt">declaration</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;string&gt;</span>
<span class="w">      </span><span class="nt">implementation </span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;string&gt;</span>
<span class="w">      </span><span class="nt">declarationFile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;string&gt; (to be implemented!)</span>
<span class="w">      </span><span class="nt">implementationFile</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;string&gt; (to be implemented!)</span>
</pre></div>
</div>
<p>The code being provided has to use the macro <code class="docutils literal notranslate"><span class="pre">{name}</span></code> in place of the concrete name of the class.</p>
</section>
</section>
<section id="global-options">
<h2>Global options<a class="headerlink" href="#global-options" title="Link to this heading"></a></h2>
<p>Some customization of the generated code is possible through flags. These flags are listed in the section <code class="docutils literal notranslate"><span class="pre">options</span></code>:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">options</span><span class="p">:</span>
<span class="w">      </span><span class="nt">getSyntax</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">False</span>
<span class="w">      </span><span class="nt">exposePODMembers</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">True</span>
<span class="w">    </span><span class="nt">components</span><span class="p">:</span>
<span class="w">      </span><span class="c1"># My simple component</span>
<span class="w">      </span><span class="nt">ExampleComponent</span><span class="p">:</span>
<span class="w">        </span><span class="nt">Members</span><span class="p">:</span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int x</span>
<span class="w">    </span><span class="nt">datatypes</span><span class="p">:</span>
<span class="w">      </span><span class="nt">ExampleType</span><span class="p">:</span>
<span class="w">        </span><span class="nt">Description</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;My</span><span class="nv"> </span><span class="s">datatype</span><span class="nv"> </span><span class="s">with</span><span class="nv"> </span><span class="s">a</span><span class="nv"> </span><span class="s">component</span><span class="nv"> </span><span class="s">member&quot;</span>
<span class="w">        </span><span class="nt">Author</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Mr</span><span class="nv"> </span><span class="s">me&quot;</span>
<span class="w">        </span><span class="nt">Members</span><span class="p">:</span>
<span class="w">         </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ExampleComponent comp // component from above</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">getSyntax</span></code>: steers the naming of get and set methods. If set to true, methods are prefixed with <code class="docutils literal notranslate"><span class="pre">get</span></code> and <code class="docutils literal notranslate"><span class="pre">set</span></code> following the capitalized member name, otherwise the member name is used for both.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">exposePODMembers</span></code>: whether get and set methods are also generated for members of a member-component. In the example corresponding methods would be generated to directly set / get <code class="docutils literal notranslate"><span class="pre">x</span></code> through <code class="docutils literal notranslate"><span class="pre">ExampleType</span></code>.</p></li>
</ul>
</section>
<section id="extending-a-datamodel-using-types-from-an-upstream-datamodel">
<h2>Extending a datamodel / using types from an upstream datamodel<a class="headerlink" href="#extending-a-datamodel-using-types-from-an-upstream-datamodel" title="Link to this heading"></a></h2>
<p>It is possible to extend another datamodel with your own types, resp. use some datatypes or components from an upstream datamodel in your own datamodel.
This can be useful for prototyping new datatypes or for accomodating special requirements without having to reimplement / copy a complete datamodel.</p>
<p>To pass an upstream datamodel to the class generator use the <code class="docutils literal notranslate"><span class="pre">--upstream-edm</span></code> option that takes the package name as well as the yaml definition file of the upstream datamodel separated by a colon (‘:’).
This will effectively make all components and datatypes of the upstream datamodel available to the current definition for validation and generation of the necessary includes.
Nevertheless, only the code for the datatypes and components defined in the current yaml file will be generated.
The podio <code class="docutils literal notranslate"><span class="pre">PODIO_GENERATE_DATAMODEL</span></code> cmake macro has gained an additional parameter <code class="docutils literal notranslate"><span class="pre">UPSTREAM_EDM</span></code> to pass the arguments to the generator via the cmake macros.</p>
<section id="potential-pitfalls">
<h3>Potential pitfalls<a class="headerlink" href="#potential-pitfalls" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>The cmake macros do not handle linking against an upstream datamodel automatically. It is the users responsibility to explicitly link against the upstream datamodel.</p></li>
<li><p>When generating two datamodels side-by-side and into the same output directory and using the <code class="docutils literal notranslate"><span class="pre">ROOT</span></code> backend, the generated <code class="docutils literal notranslate"><span class="pre">selection.xml</span></code> file might be overwritten if both datamodels are generated into the same output directory.</p></li>
</ul>
<p>Limiting this functionality to one upstream datamodel is a conscious choice to limit the potential for abuse of this feature.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Key4hep authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> Other Versions</span>
    v: v99-99-99
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions"><dl>
      <dt>Versions</dt>
      <dd><a href="../docs-on-gh-pages/datamodel_syntax.html">docs-on-gh-pages</a></dd>
      <dd><a href="../master/datamodel_syntax.html">master</a></dd>
      <dd><a href="../v00-00-00/datamodel_syntax.html">v00-00-00</a></dd>
      <dd><a href="../v00-99/datamodel_syntax.html">v00-99</a></dd>
      <dd><a href="datamodel_syntax.html">v99-99-99</a></dd>
    </dl></div>
</div>
<script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>